{"version":3,"file":"quercus.js","sources":["esm/src/lookup/LookupStrategy.js","esm/src/tree/ResolverStrategy.js","esm/src/tree/NestedMapTree.js"],"sourcesContent":["var LookupStrategy;\n(function (LookupStrategy) {\n    LookupStrategy[LookupStrategy[\"EXISTENCE_BY_NODE\"] = 0] = \"EXISTENCE_BY_NODE\";\n    LookupStrategy[LookupStrategy[\"EXISTENCE_BY_VALUE\"] = 1] = \"EXISTENCE_BY_VALUE\";\n})(LookupStrategy || (LookupStrategy = {}));\nexport { LookupStrategy };\n//# sourceMappingURL=LookupStrategy.js.map","var ResolverStrategy;\n(function (ResolverStrategy) {\n    ResolverStrategy[ResolverStrategy[\"RETURN_ON_MISSING\"] = 0] = \"RETURN_ON_MISSING\";\n    ResolverStrategy[ResolverStrategy[\"CREATE_MISSING\"] = 1] = \"CREATE_MISSING\";\n})(ResolverStrategy || (ResolverStrategy = {}));\nexport { ResolverStrategy };\n//# sourceMappingURL=ResolverStrategy.js.map","import { isEmpty, isNil } from \"lodash\";\nimport { LookupStrategy } from \"../lookup/LookupStrategy\";\nimport { ResolverStrategy } from \"./ResolverStrategy\";\nclass NestedMapTree {\n    constructor() {\n        this.node = this.createNode();\n    }\n    setPath(path, value) {\n        this.validatePath(path);\n        const lookupResult = this.resolve(path, ResolverStrategy.CREATE_MISSING);\n        const node = lookupResult.node;\n        node.value = value;\n    }\n    hasPath(path, lookupStrategy = LookupStrategy.EXISTENCE_BY_NODE) {\n        this.validatePath(path);\n        const lookupResult = this.resolve(path, ResolverStrategy.RETURN_ON_MISSING);\n        if (isNil(lookupResult.node)) {\n            return false;\n        }\n        if (lookupStrategy === LookupStrategy.EXISTENCE_BY_NODE) {\n            return true;\n        }\n        return !isNil(lookupResult.node.value);\n    }\n    getPath(path) {\n        this.validatePath(path);\n        return this.resolve(path, ResolverStrategy.RETURN_ON_MISSING);\n    }\n    resolve(path, resolverStrategy) {\n        let node = this.node;\n        for (let i = 0; i < path.length; i++) {\n            const key = path[i];\n            if (!node.map.has(key)) {\n                if (resolverStrategy !== ResolverStrategy.CREATE_MISSING) {\n                    return {\n                        node: null,\n                        matchedPath: path.slice(0, i),\n                        trailingPath: path.slice(i)\n                    };\n                }\n                const newNode = this.createNode();\n                node.map.set(key, newNode);\n                node = newNode;\n            }\n            else {\n                node = node.map.get(key);\n            }\n        }\n        return {\n            node,\n            matchedPath: path,\n            trailingPath: []\n        };\n    }\n    createNode() {\n        return { value: null, map: new Map() };\n    }\n    validatePath(path) {\n        if (isEmpty(path)) {\n            throw new TypeError(\"Path may not be empty.\");\n        }\n    }\n}\nexport { NestedMapTree };\n//# sourceMappingURL=NestedMapTree.js.map"],"names":["LookupStrategy","isNil","isEmpty"],"mappings":"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"}